{"ast":null,"code":"import _slicedToArray from\"C:/Users/hujerp/OneDrive - Webasto Group/Dokumenty/GitHub/project_holec/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:/Users/hujerp/OneDrive - Webasto Group/Dokumenty/GitHub/project_holec/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/hujerp/OneDrive - Webasto Group/Dokumenty/GitHub/project_holec/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{useEffect,useState}from\"react\";import{QueryClient,QueryClientProvider,useQuery,useMutation}from\"@tanstack/react-query\";import{Outlet}from\"react-router-dom\";import{useSearchParams,Link}from\"react-router-dom\";import Swal from'sweetalert2';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var IP='172.23.30.216';var conf=['reports','config'];function getTypyLinek(_x){return _getTypyLinek.apply(this,arguments);}function _getTypyLinek(){_getTypyLinek=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(IP){var response;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return fetch(\"http://\".concat(IP,\":3005/getTypyLinek\"));case 2:response=_context3.sent;return _context3.abrupt(\"return\",response.json());case 4:case\"end\":return _context3.stop();}},_callee3);}));return _getTypyLinek.apply(this,arguments);}function AddNewLine(_ref){var refetchTypyLinek=_ref.refetchTypyLinek;var _useMutation=useMutation({mutationFn:function mutationFn(_ref2){var newProductionLineName=_ref2.newProductionLineName;return fetch(\"http://\".concat(IP,\":3005/createNewLine\"),{method:'POST',body:JSON.stringify({PLine_name:newProductionLineName}),headers:{'Content-Type':'application/json'}});},onSuccess:function onSuccess(){Swal.fire({icon:'success',title:'Success',text:'New Production Line added successfully'});refetchTypyLinek();},onError:function onError(){return Swal.fire({icon:'error',title:'Error',text:'Failed to add new Production Line, something went wrong'});}}),status=_useMutation.status,error=_useMutation.error,mutate=_useMutation.mutate;var addNewLine=function addNewLine(){Swal.fire({title:'Add new Production Line',html:\"\\n        <textarea id=\\\"productionLine-name\\\" class=\\\"swal2-textarea\\\" placeholder=\\\"ProdutionLine name\\\" style=\\\"min-width: 350px; height: 100px; word-wrap: break-word;\\\"></textarea>\\n      \",showCancelButton:true,confirmButtonText:'Confirm',cancelButtonText:'Cancel',preConfirm:function(){var _preConfirm=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var newProductionLineName;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:newProductionLineName=document.getElementById('productionLine-name').value;mutate({newProductionLineName:newProductionLineName});case 2:case\"end\":return _context.stop();}},_callee);}));function preConfirm(){return _preConfirm.apply(this,arguments);}return preConfirm;}()});};return/*#__PURE__*/_jsx(\"button\",{className:\"pt-2 pb-2 pl-4 pr-4 bg-slate-200 hover:bg-slate-400 w-fit rounded-full mt-5\",id:\"newLine\",onClick:addNewLine,children:\"Add new line\"});};var queryClient=new QueryClient();export default function Admin(){return/*#__PURE__*/_jsx(QueryClientProvider,{client:queryClient,children:/*#__PURE__*/_jsx(Administrator,{})});}function Administrator(){var _useQuery=useQuery({queryKey:['typyLinek'],queryFn:function(){var _queryFn=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return getTypyLinek(IP);case 2:return _context2.abrupt(\"return\",_context2.sent);case 3:case\"end\":return _context2.stop();}},_callee2);}));function queryFn(){return _queryFn.apply(this,arguments);}return queryFn;}(),initialData:[]}),isLoading=_useQuery.isLoading,data=_useQuery.data,refetchTypyLinek=_useQuery.refetch;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),lineNumber=_useState2[0],setLineNumber=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),config=_useState4[0],setConfig=_useState4[1];var handleBtnLineId=function handleBtnLineId(id){console.log('btnClicked: '+id);setLineNumber(id);setConfig(null);};var handleConfigChange=function handleConfigChange(newConfig){setConfig(newConfig);};if(isLoading){return/*#__PURE__*/_jsx(\"span\",{children:\"Loading...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center w-full\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-r from-gray-700 to-gray-500 pt-16 pb-16 pl-8 pr-8 text-3xl w-screen text-center text-white \",children:/*#__PURE__*/_jsx(\"a\",{children:\"Admin Page\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-row h-screen w-screen  \",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white w-1/12 border-r-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center\",children:[data.map(function(linka){return/*#__PURE__*/_jsxs(Link,{className:\"pt-2 pb-2 pl-4 pr-4 hover:bg-slate-400 w-fit rounded-full mt-5 \".concat(linka.PLine_id===lineNumber?\"bg-blue-500 text-white\":\"bg-slate-200\"),id:linka.PLine_id,onClick:function onClick(){return handleBtnLineId(linka.PLine_id);},to:\"/admin/\".concat(linka.PLine_id),disabled:isLoading,children:[\" \",linka.PLine_name]},linka.PLine_id);}),/*#__PURE__*/_jsx(AddNewLine,{refetchTypyLinek:refetchTypyLinek})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white w-1/12 border-r-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-col items-center\",children:conf.map(function(conf){return/*#__PURE__*/_jsxs(Link,{className:\"pt-2 pb-2 pl-4 pr-4 hover:bg-slate-400 w-fit rounded-full mt-5\\n                            \".concat(conf===config?\"bg-blue-500 text-white\":\"bg-slate-200\"),id:conf,to:lineNumber===null?void 0:\"/admin/\".concat(lineNumber,\"/\").concat(conf),onClick:lineNumber===null?function(e){return e.preventDefault();}:function(){return handleConfigChange(conf);},children:[\" \",conf]},conf);})})}),/*#__PURE__*/_jsx(Outlet,{})]})]});};","map":{"version":3,"names":["useEffect","useState","QueryClient","QueryClientProvider","useQuery","useMutation","Outlet","useSearchParams","Link","Swal","IP","conf","getTypyLinek","fetch","response","json","AddNewLine","refetchTypyLinek","mutationFn","newProductionLineName","method","body","JSON","stringify","PLine_name","headers","onSuccess","fire","icon","title","text","onError","status","error","mutate","addNewLine","html","showCancelButton","confirmButtonText","cancelButtonText","preConfirm","document","getElementById","value","queryClient","Admin","Administrator","queryKey","queryFn","initialData","isLoading","data","refetch","lineNumber","setLineNumber","config","setConfig","handleBtnLineId","id","console","log","handleConfigChange","newConfig","map","linka","PLine_id","e","preventDefault"],"sources":["C:/Users/hujerp/OneDrive - Webasto Group/Dokumenty/GitHub/project_holec/frontend/src/routes/admin.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\"\r\nimport {\r\n    QueryClient,\r\n    QueryClientProvider,\r\n    useQuery,\r\n    useMutation,\r\n  } from \"@tanstack/react-query\";\r\nimport { Outlet } from \"react-router-dom\";\r\nimport { useSearchParams,\r\n            Link } from \"react-router-dom\";\r\nimport Swal from 'sweetalert2'\r\n\r\n\r\nconst IP = '172.23.30.216'\r\nconst conf = ['reports', 'config']\r\nasync function getTypyLinek (IP) {\r\n    let response = await fetch(`http://${IP}:3005/getTypyLinek`);\r\n    return response.json();\r\n  }\r\n\r\n  function AddNewLine({refetchTypyLinek}){\r\n    const { status, error, mutate } = useMutation({\r\n      mutationFn: ({newProductionLineName}) => {\r\n        return fetch(`http://${IP}:3005/createNewLine`, {\r\n          method: 'POST',\r\n          body: JSON.stringify({PLine_name: newProductionLineName, }),\r\n          headers: {\r\n            'Content-Type': 'application/json'\r\n          }\r\n        });\r\n        \r\n      },\r\n      onSuccess: () => {\r\n        Swal.fire({\r\n          icon: 'success',\r\n          title: 'Success',\r\n          text: 'New Production Line added successfully'\r\n        });\r\n        refetchTypyLinek();\r\n      },\r\n      onError: () =>\r\n      Swal.fire({\r\n        icon: 'error',\r\n        title: 'Error',\r\n        text: 'Failed to add new Production Line, something went wrong'\r\n      })\r\n    });\r\n  \r\n   const addNewLine = () => {\r\n    Swal.fire({\r\n      title: 'Add new Production Line',\r\n      html: `\r\n        <textarea id=\"productionLine-name\" class=\"swal2-textarea\" placeholder=\"ProdutionLine name\" style=\"min-width: 350px; height: 100px; word-wrap: break-word;\"></textarea>\r\n      `,\r\n      showCancelButton: true,\r\n      confirmButtonText: 'Confirm',\r\n      cancelButtonText: 'Cancel',\r\n      preConfirm: async () => {\r\n        let newProductionLineName = document.getElementById('productionLine-name').value;\r\n         mutate({newProductionLineName});\r\n       },\r\n     });\r\n   };\r\n   return (\r\n    <button className={`pt-2 pb-2 pl-4 pr-4 bg-slate-200 hover:bg-slate-400 w-fit rounded-full mt-5`} \r\n    id='newLine' onClick={addNewLine}\r\n    >\r\n    Add new line\r\n  </button>\r\n   );\r\n  };\r\n\r\n\r\nconst queryClient = new QueryClient();\r\n\r\nexport default function Admin() {\r\n  return (\r\n    <QueryClientProvider client={queryClient}>\r\n      <Administrator />\r\n    </QueryClientProvider>\r\n  );\r\n}\r\n\r\n\r\n\r\n\r\nfunction Administrator() {\r\n    \r\n    const {isLoading, data, refetch: refetchTypyLinek} = useQuery({queryKey: ['typyLinek'], queryFn: async () => await getTypyLinek(IP), initialData: []});\r\n\r\n    const [lineNumber, setLineNumber] = useState(null)\r\n    const [config, setConfig] = useState(null)\r\n\r\n    const handleBtnLineId = (id) => {\r\n        console.log('btnClicked: '+id);\r\n        setLineNumber(id);\r\n        setConfig(null) \r\n      };\r\n\r\n    const handleConfigChange = (newConfig) => {\r\n        setConfig(newConfig);\r\n    };\r\n\r\n\r\n\r\nif (isLoading) {\r\n    return <span>Loading...</span>\r\n    }\r\nreturn (\r\n<div className=\"flex flex-col items-center w-full\">\r\n            <div className=\"bg-gradient-to-r from-gray-700 to-gray-500 pt-16 pb-16 pl-8 pr-8 text-3xl w-screen text-center text-white \">\r\n                <a>Admin Page</a>              \r\n            </div>\r\n            <div className=\"flex flex-row h-screen w-screen  \">\r\n                <div className=\"bg-white w-1/12 border-r-2\">\r\n                    <div className=\"flex flex-col items-center\">\r\n                        {data.map((linka) => {\r\n                            return <Link className={`pt-2 pb-2 pl-4 pr-4 hover:bg-slate-400 w-fit rounded-full mt-5 ${ linka.PLine_id === lineNumber ? \"bg-blue-500 text-white\" : \"bg-slate-200\" }`}\r\n                        \r\n                            key={linka.PLine_id}  \r\n                            id={linka.PLine_id}\r\n                            onClick={() => handleBtnLineId(linka.PLine_id)}\r\n                            to={`/admin/${linka.PLine_id}`}\r\n                                disabled={isLoading}\r\n                                > {linka.PLine_name}\r\n                            </Link>})}\r\n                            <AddNewLine refetchTypyLinek={refetchTypyLinek}/>\r\n                    </div>\r\n                </div>\r\n                <div className=\"bg-white w-1/12 border-r-2\">\r\n                    <div className=\"flex flex-col items-center\">\r\n                        {conf.map((conf) => {\r\n                            return <Link  className={`pt-2 pb-2 pl-4 pr-4 hover:bg-slate-400 w-fit rounded-full mt-5\r\n                            ${ conf === config ? \"bg-blue-500 text-white\" : \"bg-slate-200\" }`} id={conf} key={conf}\r\n                            to={\r\n                                lineNumber === null\r\n                                ? void(0)\r\n                                : `/admin/${lineNumber}/${conf}`\r\n\r\n                            }\r\n                            onClick = {\r\n                                lineNumber === null\r\n                                ?(e) => e.preventDefault()\r\n                                :() => handleConfigChange(conf) \r\n\r\n                              } \r\n                            > {conf}\r\n                            </Link>}\r\n                        )}\r\n                    </div>\r\n                </div>\r\n                <Outlet />\r\n\r\n            </div>\r\n</div>\r\n)};\r\n\r\n\r\n\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}